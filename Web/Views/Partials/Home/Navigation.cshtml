@inherits UmbracoTemplatePage
@{
    // Model.Content is the current page that we're on
    // AncestorsOrSelf is all of the ancestors this page has in the tree
    // (1) means: go up to level 1 and stop looking for more ancestors when you get there
    // First() gets the first ancestor found (the home page, on level 1)
    var homePage = Model.Content.AncestorOrSelf(1);

    var menuItems = homePage.FirstChild<MenuContainer>()
        .Children<MenuItem>()
        .Where(i => !i.UmbracoNaviHide)
        .ToList();
}

<nav class="home-nav-wrapper">
    <div class="container">
        <ul class="home-nav-container">
            @foreach (var item in menuItems)
            {
                var content = Umbraco.TypedContent(item.LinkUrl);
                var image = item.Image;
                <li class="nav-item @item.CssClass">
                    @if (content != null)
                    {
                        <a href="@content.Url">
                            @if (image != null)
                            {
                                var imageUrl = image.Src + image.GetCropUrl(image.Crops.First().Alias);
                                <img class="img-responsive" src="@imageUrl" alt="" />
                            }
                            <span>@item.Name</span>
                        </a>
                    }
                </li>
            }
        </ul>
    </div>
</nav>

@*<nav class="header-nav navbar navbar-default">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navigation">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>

        <div class="navbar-collapse collapse " id="navigation">
            <ul class="nav navbar-nav navbar-right">
                @{
                    var dict = new ViewDataDictionary(ViewData) { { "menuItem", homePage } };
                    Html.RenderPartial("~/Views/Partials/Navigation/TopNavigationList.cshtml", dict);
                }
            </ul>
        </div>
    </nav>*@